<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Webhooks on Harvester manual test cases</title>
    <link>https://harvester.github.io/tests/manual/webhooks/</link>
    <description>Recent content in Webhooks on Harvester manual test cases</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <atom:link href="https://harvester.github.io/tests/manual/webhooks/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>datavolumes.cdi.kubevirt.io</title>
      <link>https://harvester.github.io/tests/manual/webhooks/datavolumes.cdi.kubevirt.io/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/webhooks/datavolumes.cdi.kubevirt.io/</guid>
      <description>&lt;h2 id=&#34;gui&#34;&gt;GUI&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Create a VM in GUI and wait until it&amp;rsquo;s running. Assume its name is test.&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;kube-api&#34;&gt;kube-api&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Try to delete its datavolume:&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ kubectl get vms&#xA;NAME AGE   STATUS  READY&#xA;test 5m16s Running True&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ol&gt;&#xA;&lt;li&gt;There should be an datavolume bound to that VM&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ kubectl get dvs&#xA;NAME              PHASE     PROGRESS RESTARTS AGE&#xA;test-disk-0-klrft Succeeded 100.0%            5m18s&#xA;&lt;/code&gt;&lt;/pr</description>
    </item>
    <item>
      <title>keypairs.harvesterhci.io</title>
      <link>https://harvester.github.io/tests/manual/webhooks/keypairs.harvesterhci.io/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/webhooks/keypairs.harvesterhci.io/</guid>
      <description>&lt;h3 id=&#34;gui&#34;&gt;GUI&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Enable VLAN network in settings&lt;/li&gt;&#xA;&lt;li&gt;Create a network with VLAN 5 and assume its name is my-network.&#xA;C1. reate another network with VLAN 5: it should fails with:&#xA;admission webhook &amp;ldquo;&lt;a href=&#34;http://validator.harvesterhci.io/&#34;&gt;validator.harvesterhci.io&lt;/a&gt;&amp;rdquo; denied the request: VLAN ID 5 is already allocated&lt;/li&gt;&#xA;&lt;li&gt;Create a VM on VLAN 5, delete network my-network and it should fail with:&#xA;admission webhook &amp;ldquo;&lt;a href=&#34;http://validator.harvesterhci.io/&#34;&gt;validator.harvesterhci.io&lt;/a&gt;&amp;rdquo; denied the request: network my-network is still used by vm(s): vm-test in a modal.&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;expected-results&#34;&gt;Expected Results&lt;/h2&gt;&#xA;&lt;h3 id=&#34;gui-1&#34;&gt;GUI&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;The operations should fail with.&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
    <item>
      <title>network-attachment-definitions.k8s.cni.cncf.io</title>
      <link>https://harvester.github.io/tests/manual/webhooks/q-network-attachment-definitions.k8s.cni.cncf.io/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/webhooks/q-network-attachment-definitions.k8s.cni.cncf.io/</guid>
      <description>&lt;h3 id=&#34;gui&#34;&gt;GUI&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Enable VLAN network in settings&lt;/li&gt;&#xA;&lt;li&gt;Create a network with VLAN 5 and assume its name is my-network.&lt;/li&gt;&#xA;&lt;li&gt;Create another network with VLAN 5: it should fails with:&#xA;admission webhook &amp;ldquo;&lt;a href=&#34;http://validator.harvesterhci.io/&#34;&gt;validator.harvesterhci.io&lt;/a&gt;&amp;rdquo; denied the request: VLAN ID 5 is already allocated&lt;/li&gt;&#xA;&lt;li&gt;Create a VM on VLAN 5, delete network my-network and it should fail with:&#xA;admission webhook &amp;ldquo;&lt;a href=&#34;http://validator.harvesterhci.io/&#34;&gt;validator.harvesterhci.io&lt;/a&gt;&amp;rdquo; denied the request: network my-network is still used by vm(s): vm-test in a modal&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;expected-results&#34;&gt;Expected Results&lt;/h2&gt;&#xA;&lt;h3 id=&#34;gui-1&#34;&gt;GUI&lt;/h3&gt;&#xA;&lt;p&gt;Unsure of desired behavior. Checking and will update.&lt;/p&gt;</description>
    </item>
    <item>
      <title>virtualmachineimages.harvesterhci.io</title>
      <link>https://harvester.github.io/tests/manual/webhooks/virtualmachineimages.harvesterhci.io/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/webhooks/virtualmachineimages.harvesterhci.io/</guid>
      <description>&lt;h3 id=&#34;gui&#34;&gt;GUI&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Create an image from GUI&lt;/li&gt;&#xA;&lt;li&gt;Create another image with the same name. The operation should fail with admission webhook &amp;ldquo;&lt;a href=&#34;http://validator.harvesterhci.io/&#34;&gt;validator.harvesterhci.io&lt;/a&gt;&amp;rdquo; denied the request: A resource with the same name exists&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;kube-api&#34;&gt;kube-api&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Create an image from the manifest:&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ cat image.yaml&#xA;---&#xA;apiVersion: harvesterhci.io/v1beta1&#xA;kind: VirtualMachineImage&#xA;metadata:&#xA;  generateName: image-&#xA;  namespace: default&#xA;spec:&#xA;  sourceType: download&#xA;  displayName: cirros-0.5.1-x86_64-disk2.img&#xA;  url: http://192.168.2.106/cirros-0.5.1-x86_64-disk.img&#xA;&#xA;$ kubectl create -f image.yml&#xA;virtualmachineimage.harvesterhci.io/image-8dkbq created&#xA;&lt;/code&gt;&lt;/pr</description>
    </item>
    <item>
      <title>virtualmachinerestores.harvesterhci.io</title>
      <link>https://harvester.github.io/tests/manual/webhooks/virtualmachinerestores.harvesterhci.io/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/webhooks/virtualmachinerestores.harvesterhci.io/</guid>
      <description>&lt;h3 id=&#34;gui&#34;&gt;GUI&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Setup a backup target&lt;/li&gt;&#xA;&lt;li&gt;Create a backup from a VM. Assume the VM name is vm-test&lt;/li&gt;&#xA;&lt;li&gt;Wait until backup is done&lt;/li&gt;&#xA;&lt;li&gt;Restore the backup to a VM, enter vm-test in the Virtual Machine Name field&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;kube-api&#34;&gt;kube-api&lt;/h3&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ cat restore.yaml 1&#xA;---&#xA;apiVersion: harvesterhci.io/v1beta1&#xA;kind: VirtualMachineRestore&#xA;metadata:&#xA;  name: restore-aaaa&#xA;  namespace: default&#xA;spec:&#xA;  newVM: false&#xA;  target:&#xA;    apiGroup: kubevirt.io&#xA;    kind: VirtualMachine&#xA;    name: &amp;#34;&amp;#34;&#xA;virtualMachineBackupName: test&#xA;$ kubectl create -f restore.yaml&#xA;&lt;/code&gt;&lt;/pr</description>
    </item>
    <item>
      <title>virtualmachinetemplateversions.harvesterhci.io</title>
      <link>https://harvester.github.io/tests/manual/webhooks/virtualmachinetemplateversions.harvesterhci.io/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://harvester.github.io/tests/manual/webhooks/virtualmachinetemplateversions.harvesterhci.io/</guid>
      <description>&lt;h3 id=&#34;kube-api&#34;&gt;kube-api&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;List default templates:&#xA;&lt;code&gt;$ kubectl get virtualmachinetemplateversions.harvesterhci.io -n harvester-public&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;gui&#34;&gt;GUI&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Go to Advanced -&amp;gt; Templates page&lt;/li&gt;&#xA;&lt;li&gt;Create a new template and set it as the default version&lt;/li&gt;&#xA;&lt;li&gt;Try to delete the default version&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;expected-results&#34;&gt;Expected Results&lt;/h2&gt;&#xA;&lt;h3 id=&#34;kube-api-1&#34;&gt;kube-api&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Default templates should exist:&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;NAME                             TEMPLATE_ID   VERSION   AGE&#xA;iso-image-base-version                         1         39m&#xA;raw-image-base-version                         1         39m&#xA;windows-iso-image-base-version                 1         39m&#xA;&lt;/code&gt;&lt;/pr</description>
    </item>
  </channel>
</rss>
